<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profile</title>
<style>
  body { font-family: Arial, sans-serif; padding: 2rem; background: #f2f2f2; }
  .profile-card { 
    background: #fff; padding: 2rem; border-radius: 8px; 
    max-width: 400px; margin: auto; box-shadow: 0 2px 8px rgba(0,0,0,0.1); text-align: center;
  }
  .profile-card h1 { margin-top: 0; }
  .profile-card p { margin: 0.5rem 0; }
  .profile-card img { margin-top: 1rem; width: 150px; height: 150px; border-radius: 50%; object-fit: cover; display: none; }
  button { margin-top: 1rem; padding: 0.5rem 1rem; cursor: pointer; }
  input[type="file"] { display: none; }
</style>
</head>
<body>

<div class="profile-card">
  <h1 id="displayName">Guest</h1>
  <p>Email: <span id="displayEmail">Not signed in</span></p>
  
  <img id="profilePic" alt="Profile Picture">
  <br>
  <button id="addPicBtn">Add / Change Picture</button>
  <input type="file" id="picInput" accept="image/*" capture="environment">
</div>

<script>
  const username = localStorage.getItem('username');
  const email = localStorage.getItem('email');
  const storedPic = localStorage.getItem('profilePic');

  const displayName = document.getElementById('displayName');
  const displayEmail = document.getElementById('displayEmail');
  const profilePic = document.getElementById('profilePic');
  const addPicBtn = document.getElementById('addPicBtn');
  const picInput = document.getElementById('picInput');

  if (username) displayName.textContent = username;
  if (email) displayEmail.textContent = email;
  if (storedPic) {
    profilePic.src = storedPic;
    profilePic.style.display = 'block';
  }

  addPicBtn.addEventListener('click', () => {
    picInput.click();
  });

  picInput.addEventListener('change', (event) => {
    const file = event.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = function(e) {
      const dataURL = e.target.result;
      profilePic.src = dataURL;
      profilePic.style.display = 'block';
      localStorage.setItem('profilePic', dataURL);
    };
    reader.readAsDataURL(file);
  });
</script>

</body>
</html>
